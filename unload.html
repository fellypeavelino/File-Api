<!DOCTYPE html>
	<html>
		<head>
			<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
			<meta charset="utf-8">
			<script>
/*var test = 1;
window.onbeforeunload = function() {
    setTimeout(function() {
        test = 2;
    }, 500)
    return "If you leave this page, data may be lost.";
}
setInterval(function() {
    if (test === 2) {
        window.onbeforeunload = null;
        // use this one on your page
        //window.location = "https://developer.mozilla.org/en-US/";
        // this one is just for fiddle
        window.parent.location = "http://www.google.com";
        test = 3; // kill interval! just for this test
    }
}, 50);*/
$(function(){
	/*
	$(document).keypress(function(event){
		alert(
			event.keyCode
		);
	});
	*/
	$(document).on('mousedown', 'a[href]', offBeforeUnload).on('mouseleave', 'a[href]', function () {
		$(window).on('beforeunload', windowBeforeUnload);
	});

	$(document).on('mousedown', 'input', offBeforeUnload).on('mouseleave', 'input', function () {
		$(window).on('beforeunload', windowBeforeUnload);
	});
	
	$(document).on('keydown', offBeforeUnload).on('keyup', function () {
		$(window).on('beforeunload', windowBeforeUnload);
	});
	
	function offBeforeUnload(event) {
		$(window).off('beforeunload');
	}

	function windowBeforeUnload() { 
          return "Are you sure?"; 
	}

$(window).on('beforeunload', windowBeforeUnload);
});

</script>
		</head>
		<body>
			<form action="http://www.youtube.com">
				<input type="submit" value="teste"/>
			</form>
		</body>
	</html>
	<?php

	?>